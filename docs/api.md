<!-- This file is autogenerated, do not modify directly,
     If you wish to edit the contents update the documentation
     comments or the template file: misc/api-template.md -->

# API

## Version

### [GET /api/version](../server/src/routes/version.js#L49)

Retrieve version information about the running server.

Example response
```json
{
  "gitHash": "331d54dc84a46d12e15bdc9e7b16aacf2f2741a9",
  "gitBranch": "develop"
}
```

## Comments

### [GET /api/comments](../server/src/routes/comments.js#L38)

Retrieve all comments.

returns JSON array of all comments grouped with reactions in database
```json
{
    "1bd8052b": {
        "id": "1bd8052b",
        "time": "2018-11-14 16:35:27",
        "text": "skrattia",
        "user_id": "da776df3",
        "reactions": [
            {
                "id": "1ddb07c8",
                "time": "2019-01-16 16:43:21",
                "user_id": "da776df3",
                "emoji": "üçë",
                "comment_id": "1bd8052b"
            },
         ],
    },
    "cb38e8f6": {
        "id": "cb38e8f6",
        "time": "2018-11-14 17:10:42",
        "text": "tr√∂ttist√§",
        "user_id": "da776df3",
        "reactions": []
    },
}
```
### [POST /api/comments](../server/src/routes/comments.js#L88)

Adds comment to database.

Example body for a root comment
```json
{
  "text": "minttua",
  "user": "salaattipoika",
  "container": "abcdef",
  "blob": "{\"path\": \"/path/to/element\"}"
}
```
comments can be linked to a thread with
```json
{
  "text": "minttua",
  "user": "salaattipoika",
  "threadId": "1234",
  "blob": "{\"path\": \"/path/to/element\"}"
}
```

Returns `{ id, threadId }` of the new comment

### [GET /api/comments/:threadId](../server/src/routes/comments.js#L112)

Get comments by threadId

returns JSON array of all comments in thread

## Questions

### [GET /api/questions](../server/src/routes/questions.js#L13)

Retrieve all questions.

returns JSON array of all questions in database
### [POST /api/questions](../server/src/routes/questions.js#L27)

adds question to database.

Example body
```json
{
  "text": "What?",
  "user": "salaattipoika",
  "blob": "{\"path\": \"/path/to/element\"}"
}
```

Returns `{ id }` of the created question

## Reactions

### [GET /api/reactions](../server/src/routes/reactions.js#L15)

Retrieve all reactions.

returns JSON array of all reactions in database
### [POST /api/reactions](../server/src/routes/reactions.js#L38)

add reaction to the database.

Example body
```json
{
  "emoji": "üçë",
  "user": "jaba",
  "commentId": "1bd8052b"
}
```

Returns `{ id }` of the reaction

### [GET /api/reactions/:commentId](../server/src/routes/reactions.js#L23)

Retrieve all reactions by commentId.

returns JSON array of all reactions to comment
### [DELETE /api/reactions/:commentId](../server/src/routes/reactions.js#L56)

Remove reaction from the database.

Returns JSON indicating whether deletion was successful or not

## Users

### [POST /api/users](../server/src/routes/users.js#L21)

Add user to database.
Returns JSON that contains generated id and secret of added user.
The body can be empty to create a new anonymous user which is the default
mode of interaction in the frontend.
Alternatively you can specify properties for the new user, eg.
```json
{
  "name": "salaattipoika"
}
```

Example response
```json
{
    "id": "d6ac55e9",
    "secret": "ea2ca2565f484906bfd5096126816a"
}
```
